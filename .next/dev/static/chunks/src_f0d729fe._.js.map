{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/ArifPayHackathon/Arifpay-Hackathon-2025-TenaVerse/client/src/lib/api.ts"],"sourcesContent":["import axios from \"axios\";\r\n\r\nexport const api = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL || \"http://localhost:3000\",\r\n});\r\n\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (token) config.headers.Authorization = `Bearer ${token}`;\r\n  return config;\r\n});\r\n\r\nlet isRefreshing = false;\r\n\r\napi.interceptors.response.use(\r\n  (res) => res,\r\n  async (error) => {\r\n    const originalRequest = error.config;\r\n\r\n    // Handle token expiration\r\n    if (\r\n      error.response?.status === 401 &&\r\n      !originalRequest._retry &&\r\n      !isRefreshing\r\n    ) {\r\n      originalRequest._retry = true;\r\n      isRefreshing = true;\r\n      try {\r\n        const refreshToken = localStorage.getItem(\"refreshToken\");\r\n        const { data } = await axios.post(\r\n          `${process.env.NEXT_PUBLIC_API_URL}/api/auth/refresh`,\r\n          { refreshToken }\r\n        );\r\n        localStorage.setItem(\"token\", data.token);\r\n        api.defaults.headers.Authorization = `Bearer ${data.token}`;\r\n        return api(originalRequest);\r\n      } catch (err) {\r\n        localStorage.removeItem(\"token\");\r\n        localStorage.removeItem(\"refreshToken\");\r\n        localStorage.removeItem(\"user\");\r\n        window.location.href = \"/login\";\r\n      } finally {\r\n        isRefreshing = false;\r\n      }\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n"],"names":[],"mappings":";;;;AAGW;AAHX;;AAEO,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IAC9B,SAAS,6DAAmC;AAC9C;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAC3D,OAAO;AACT;AAEA,IAAI,eAAe;AAEnB,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,MAAQ,KACT,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,0BAA0B;IAC1B,IACE,MAAM,QAAQ,EAAE,WAAW,OAC3B,CAAC,gBAAgB,MAAM,IACvB,CAAC,cACD;QACA,gBAAgB,MAAM,GAAG;QACzB,eAAe;QACf,IAAI;YACF,MAAM,eAAe,aAAa,OAAO,CAAC;YAC1C,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,mJAAK,CAAC,IAAI,CAC/B,6DAAmC,iBAAiB,CAAC,EACrD;gBAAE;YAAa;YAEjB,aAAa,OAAO,CAAC,SAAS,KAAK,KAAK;YACxC,IAAI,QAAQ,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,KAAK,KAAK,EAAE;YAC3D,OAAO,IAAI;QACb,EAAE,OAAO,KAAK;YACZ,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB,SAAU;YACR,eAAe;QACjB;IACF;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB","debugId":null}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///E:/ArifPayHackathon/Arifpay-Hackathon-2025-TenaVerse/client/src/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\r\nimport {\r\n  createContext,\r\n  useContext,\r\n  useState,\r\n  ReactNode,\r\n  useEffect,\r\n} from \"react\";\r\nimport { api } from \"../lib/api\";\r\nimport toast from \"react-hot-toast\";\r\n\r\ninterface User {\r\n  id: string;\r\n  fullName: string;\r\n  email: string;\r\n  phone: string;\r\n  role: \"USER\" | \"ADMIN\";\r\n  balance: number;\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  login: (email: string, password: string) => Promise<void>;\r\n  logout: () => void;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType>({} as any);\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null);\r\n\r\n  async function login(email: string, password: string) {\r\n    try {\r\n      const res = await api.post(\"/api/users/login\", { email, password });\r\n        const { token, refreshToken, user } = res.data;\r\n      localStorage.setItem(\"token\", token);\r\n       localStorage.setItem(\"refreshToken\", refreshToken);\r\n       localStorage.setItem(\"user\", JSON.stringify(user));\r\n      const me = await api.get(\"/api/users/me\");\r\n      setUser(me.data.user);\r\n      toast.success(\"Logged in successfully\");\r\n    } catch (err: any) {\r\n      toast.error(err.response?.data?.message || \"Login failed\");\r\n    }\r\n  }\r\n\r\n  function logout() {\r\n    localStorage.removeItem(\"token\");\r\n     localStorage.removeItem(\"user\");\r\n    setUser(null);\r\n    window.location.href = \"/login\";\r\n  }\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (token) {\r\n        try {\r\n          const me = await api.get(\"/api/users/me\");\r\n          setUser(me.data.user);\r\n        } catch {\r\n          logout();\r\n        }\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, login, logout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AACA;AAOA;AACA;;;AATA;;;;AA0BA,MAAM,4BAAc,IAAA,8KAAa,EAAkB,CAAC;AAE7C,MAAM,UAAU;;IAAM,OAAA,IAAA,2KAAU,EAAC;AAAW;GAAtC;AAEN,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAc;IAE9C,eAAe,MAAM,KAAa,EAAE,QAAgB;QAClD,IAAI;YACF,MAAM,MAAM,MAAM,2HAAG,CAAC,IAAI,CAAC,oBAAoB;gBAAE;gBAAO;YAAS;YAC/D,MAAM,EAAE,KAAK,EAAE,YAAY,EAAE,IAAI,EAAE,GAAG,IAAI,IAAI;YAChD,aAAa,OAAO,CAAC,SAAS;YAC7B,aAAa,OAAO,CAAC,gBAAgB;YACrC,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;YAC7C,MAAM,KAAK,MAAM,2HAAG,CAAC,GAAG,CAAC;YACzB,QAAQ,GAAG,IAAI,CAAC,IAAI;YACpB,qKAAK,CAAC,OAAO,CAAC;QAChB,EAAE,OAAO,KAAU;YACjB,qKAAK,CAAC,KAAK,CAAC,IAAI,QAAQ,EAAE,MAAM,WAAW;QAC7C;IACF;IAEA,SAAS;QACP,aAAa,UAAU,CAAC;QACvB,aAAa,UAAU,CAAC;QACzB,QAAQ;QACR,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IAEA,IAAA,0KAAS;kCAAC;YACR;0CAAC;oBACC,MAAM,QAAQ,aAAa,OAAO,CAAC;oBACnC,IAAI,OAAO;wBACT,IAAI;4BACF,MAAM,KAAK,MAAM,2HAAG,CAAC,GAAG,CAAC;4BACzB,QAAQ,GAAG,IAAI,CAAC,IAAI;wBACtB,EAAE,OAAM;4BACN;wBACF;oBACF;gBACF;aAAC;QACH;iCAAG,EAAE;IAEL,qBACE,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAO;QAAO;kBAChD;;;;;;AAGP;IA5CgB;KAAA","debugId":null}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///E:/ArifPayHackathon/Arifpay-Hackathon-2025-TenaVerse/client/src/app/layout.tsx"],"sourcesContent":["\"use client\";\r\nimport { ThemeProvider } from \"next-themes\";\r\nimport { AuthProvider } from \"@/context/AuthContext\";\r\nimport { Toaster } from \"react-hot-toast\";\r\nimport \"./globals.css\";\r\n\r\nexport default function RootLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  return (\r\n    <html lang=\"en\">\r\n      <body>\r\n        <ThemeProvider attribute=\"class\" defaultTheme=\"xzzzzz\" enableSystem>\r\n          <AuthProvider>\r\n            {children}\r\n            <Toaster position=\"top-right\" />\r\n          </AuthProvider>\r\n        </ThemeProvider>\r\n      </body>\r\n    </html>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;;AAMe,SAAS,WAAW,EACjC,QAAQ,EAGT;IACC,qBACE,6LAAC;QAAK,MAAK;kBACT,cAAA,6LAAC;sBACC,cAAA,6LAAC,oKAAa;gBAAC,WAAU;gBAAQ,cAAa;gBAAS,YAAY;0BACjE,cAAA,6LAAC,iJAAY;;wBACV;sCACD,6LAAC,qKAAO;4BAAC,UAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM9B;KAjBwB","debugId":null}}]
}